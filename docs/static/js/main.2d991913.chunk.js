(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t,a){e.exports=a.p+"static/media/luxun_1.77bdf646.jpg"},240:function(e,t,a){e.exports=a(590)},590:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),i=a.n(l),o=a(27),c=a(28),u=a(30),s=a(29),m=a(31),d=a(237),h=a(236),g=a.n(h),f=a(64),p=a(214),b=a(40),E=a(87),x=a(218),v=a.n(x),y=a(219),j=a.n(y),C=E,w=C.default,O=(C.css,C.createGlobalStyle,C.keyframes,C.ThemeProvider,Object(b.createMuiTheme)({palette:{primary:v.a,secondary:j.a},typography:{useNextVariants:!0,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}})),k=n.createContext(O),S=w,I=a(6),T=a(220),A=a(52),R=a.n(A),F=a(130),L=a.n(F),D=["\u665a\u7761\u7684\u4eba\uff0c\u6ca1\u6709\u5bf9\u8c61","\u8868\u60c5\u5305\u591a\u7684\u4eba\uff0c\u6ca1\u6709\u5bf9\u8c61","\u6211\u6ca1\u8bf4\u8fc7\u8fd9\u4e9b\u8bdd","no zuo no die","\u6211\u5c31\u9759\u9759\u5730\u770b\u7740\u4f60\u4eec\u88c5\u903c"],M=function(){return D[Math.floor(Math.random()*D.length)]},P=I.s.model({dictum:M(),author:"\u9c81\u8fc5",imageSrc:L.a,imageLoading:!1,externalImageSrc:"",externalImageFetching:!1,multiline:!1,textColor:"#FFF"}).views(function(e){return{get authorVisible(){return!!e.author}}}).actions(function(e){var t=new window.AbortController,a=t.signal;return{changeDictum:function(t){e.dictum=t},drawDictum:function(){e.dictum=M()},changeAuthor:function(t){e.author=t},changeImage:function(t){e.imageSrc=t},changeExternalImage:function(t){e.externalImageSrc=t},changeTextColor:function(t){e.textColor=t},toggleLoading:function(t){e.imageLoading=t},toggleMultiline:function(t){e.multiline=t},reset:function(){e.imageSrc=L.a,e.dictum=M(),e.author="\u9c81\u8fc5",e.textColor="#FFF"},pickExternalImage:Object(I.f)(R.a.mark(function n(){var r,l,i;return R.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.externalImageFetching?(t.abort(),t=new window.AbortController,a=t.signal):e.externalImageFetching=!0,n.prev=1,n.next=4,fetch("https://api.unsplash.com/photos/random/?client_id=".concat("556115dbc94565196eeec1ba84158924b3c6d4d54918fb1f5cb736c56d3d6982"),{signal:a});case 4:return r=n.sent,n.next=7,r.json();case 7:l=n.sent,i=l.urls.regular,e.externalImageSrc=i,e.imageSrc=i,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),console.error(n.t0);case 16:return n.prev=16,e.externalImageFetching=!1,n.finish(16);case 19:case"end":return n.stop()}},n,this,[[1,13,16,19]])}))}}),z=I.s.model({builder:I.s.optional(P,{})}).create(),W=n.createContext(z);Object(I.a)(z,T.a);var _=a(593),U=a(594),B=a(595),H=a(34),V=a(591),N=a(221),G=a.n(N),J=a(222),Y=a.n(J),$=a(23),q=a.n($),K=a(21),Q=a.n(K);function X(){var e=Object(H.a)(["\n  flex-grow: 1;\n  padding: 24px;\n"]);return X=function(){return e},e}function Z(){var e=Object(H.a)(["\n  flex-grow: 1;\n  padding-left: 24px;\n"]);return Z=function(){return e},e}function ee(){var e=Object(H.a)(["\n  text-decoration: none;\n  color: inherit;\n"]);return ee=function(){return e},e}function te(){var e=Object(H.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n"]);return te=function(){return e},e}var ae,ne,re,le,ie,oe,ce,ue,se=S.div(te()),me=S(V.a)(ee()),de=S(q.a)(Z()),he=S.section(X()),ge=function(e){var t=e.children;return r.a.createElement(se,null,r.a.createElement(G.a,{position:"sticky"},r.a.createElement(Y.a,null,r.a.createElement(q.a,{variant:"h6",color:"inherit"},r.a.createElement(me,{to:"/"},"MEME")),r.a.createElement(de,{color:"inherit"},"For modern browsers only"),r.a.createElement(Q.a,{color:"inherit"},"Gallery"))),r.a.createElement(he,null,t))},fe=a(88),pe=a(42),be=a(89),Ee=(a(158),a(41)),xe=a(3),ve=a(127),ye=a.n(ve),je=a(65),Ce=a.n(je),we=a(234),Oe=a.n(we),ke=a(223),Se=a(91),Ie=a.n(Se),Te=a(92),Ae=a.n(Te),Re=a(43),Fe=a.n(Re),Le=a(53),De=a.n(Le),Me=a(225),Pe=a.n(Me),ze=a(226),We=a.n(ze),_e=a(227),Ue=a.n(_e),Be=a(131),He=a.n(Be),Ve=a(67),Ne=a.n(Ve),Ge=a(93),Je=a.n(Ge),Ye=a(228),$e=a.n(Ye),qe=a(90),Ke=a.n(qe),Qe=a(54),Xe=a(224),Ze=a.n(Xe),et=Object(Ee.a)((re=ne=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).authorTextRef=r.a.createRef(),a.dictumTextRef=r.a.createRef(),a.stageRef=null,a.setStageRef=function(e){a.stageRef=e,a.props.innerRef(e)},a.shouldAdjustText=!1,a.state={image:null,error:null,stageWidth:600,stageHeight:600},a.componentDidMount=function(){Object(xe.i)(function(){a._createImage(a.context.builder.imageSrc)}),Object(xe.x)(function(){return{dictum:a.context.builder.dictum,author:a.context.builder.author,textColor:a.context.builder.textColor,stageWidth:a.state.stageWidth}},function(){a.shouldAdjustText=!0})},a.componentDidUpdate=function(e,t){(a.state.image!==t.image||a.shouldAdjustText)&&(a._adjustText(),a.shouldAdjustText=!1)},a.handleImageReload=function(){a._createImage(a.context.builder.imageSrc)},a.handleResize=function(e){a.setState({stageWidth:e})},a.handleSnackbarClose=function(){a.setState({error:null})},a._computeScale=function(e,t,a){if(!a)return 1;var n=Math.min(e,a.width)/a.width,r=Math.min(t,a.height)/a.height;return Math.min(n,r,1)},a._computeSize=function(e,t,a,n){return e?{width:e.width*t,height:e.height*t}:{width:a,height:n}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"_createImage",value:function(e){var t=this;if(e){var a=this.context.builder;a.toggleLoading(!0);var n=new window.Image;n.src=e,n.onload=function(){a.toggleLoading(!1),t.setState({image:n})},n.onerror=function(e){a.toggleLoading(!1),a.changeImage(""),t.setState({error:e})}}}},{key:"_adjustText",value:function(){var e=this.stageRef,t=this.authorTextRef.current,a=this.dictumTextRef.current;if(e&&t&&a){var n=e.getStage().getHeight()-t.getHeight();t.y(n),a.y(n-a.getHeight())}}},{key:"render",value:function(){var e=this.context.builder,t=e.dictum,a=e.author,l=e.textColor,i=this.state,o=i.image,c=i.error,u=i.stageWidth,s=i.stageHeight,m=this._computeScale(u,s,o),d=this._computeSize(o,m,u,s),h=d.width,g=d.height;return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Qe.Stage,{ref:this.setStageRef,width:h,height:g},r.a.createElement(Qe.Layer,null,o&&r.a.createElement(n.Fragment,null,r.a.createElement(Qe.Image,{image:o,preventDefault:!1,scale:{x:m,y:m}}),r.a.createElement(Qe.Text,{ref:this.dictumTextRef,width:h,x:0,y:g,fill:l,text:t,fontSize:48*m,align:"center",verticalAlign:"bottom",preventDefault:!1,draggable:!0}),r.a.createElement(Qe.Text,{ref:this.authorTextRef,width:h,x:0,y:g,fill:l,text:a&&"\u2014\u2014".concat(a),padding:16,fontSize:36*m,align:"right",verticalAlign:"bottom",preventDefault:!1,draggable:!0})))),r.a.createElement(Ke.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!!c,autoHideDuration:3e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Failed to loading image, please check the URL"),action:[r.a.createElement(Q.a,{key:"reload",color:"secondary",size:"small",onClick:this.handleImageReload},"RETRY")]}),r.a.createElement(Ze.a,{handleWidth:!0,onResize:this.handleResize,refreshMode:"throttle"}))}}]),t}(n.Component),ne.contextType=W,ae=re))||ae;function tt(){var e=Object(H.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return tt=function(){return e},e}var at,nt,rt,lt,it,ot,ct,ut,st=Object(E.default)(Fe.a)(tt()),mt={marginLeft:8},dt=Object(Ee.a)((ue=ce=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l))),Object(fe.a)(n,"error",oe,Object(pe.a)(Object(pe.a)(n))),n.canvasRef=null,n.handleFileUpload=function(e){var t=e.target,a=t.files&&t.files[0];if(a){var r=new FileReader;r.addEventListener("load",function(){n.context.builder.changeImage(r.result)}),r.readAsDataURL(a)}},n.handleFileDownload=Object(ke.a)(R.a.mark(function e(){var t,r,l,i;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e(1).then(a.t.bind(null,592,7));case 2:if(t=e.sent,r=t.saveAs,l=n.canvasRef){i=l.getStage().toCanvas({});try{i.toBlob(function(e){e&&r(e,"pretty image.png")})}catch(o){n.error=o}}case 6:case"end":return e.stop()}},e,this)})),n.handleFileCopy=function(){},n.handleExternalImageSrcChange=function(e){var t=e.target;n.context.builder.changeExternalImage(t.value)},n.handleExternalImageLoad=function(){var e=n.context.builder;e.changeImage(e.externalImageSrc)},n.handleSnackbarClose=function(){n.error=null},n.handleExternalImagePick=function(){n.context.builder.pickExternalImage()},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.context.builder,a=t.externalImageSrc,l=t.externalImageFetching;return r.a.createElement(n.Fragment,null,r.a.createElement(Ie.a,null,r.a.createElement(Ae.a,{title:"\u56fe\u7247\u9884\u89c8"}),r.a.createElement(st,null,r.a.createElement(et,{innerRef:function(t){return e.canvasRef=t}})),r.a.createElement(De.a,null,r.a.createElement("input",{onChange:this.handleFileUpload,accept:"image/*",style:{display:"none"},id:"upload-image",type:"file"}),r.a.createElement("label",{htmlFor:"upload-image"},r.a.createElement(Q.a,{component:"span",color:"primary"},"Upload",r.a.createElement(Pe.a,{style:mt}))),r.a.createElement(Q.a,{color:"secondary",onClick:this.handleFileDownload},"Save",r.a.createElement(We.a,{style:mt})),r.a.createElement(n.Fragment,null,r.a.createElement(He.a,{disableTouchListener:!0,title:"Not supported yet!"},r.a.createElement(Q.a,{color:"default",onClick:this.handleFileCopy},"Copy",r.a.createElement(Ue.a,{style:mt}))))),r.a.createElement(Fe.a,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(q.a,{color:"textSecondary",gutterBottom:!0},"Text supports drag & drop")),r.a.createElement("li",null,r.a.createElement(q.a,{color:"textSecondary",gutterBottom:!0},"Image might overflow with insufficient space, click Save button to preview whole")),r.a.createElement("li",null,r.a.createElement(q.a,{color:"textSecondary"},"Failed to find a clipboard api to programmatically copy canvas/image, right click and select 'Copy image' works though")))),r.a.createElement(Fe.a,null,r.a.createElement(Ne.a,{label:"External source",value:a,placeholder:"Use external image source",helperText:"Enter an valid image source and click 'APPLY'",fullWidth:!0,disabled:l,margin:"normal",onChange:this.handleExternalImageSrcChange,InputProps:{endAdornment:r.a.createElement(Je.a,{position:"end"},r.a.createElement(He.a,{disableTouchListener:!0,title:"Apply"},r.a.createElement("div",null,r.a.createElement(Ce.a,{disabled:!a,onClick:this.handleExternalImageLoad},r.a.createElement($e.a,null)))))}})),r.a.createElement(De.a,null,r.a.createElement(Q.a,{onClick:this.handleExternalImagePick},"I'm Feeling Lucky"))),r.a.createElement(Ke.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!!this.error,autoHideDuration:3e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"External image may not be downloaded this way. Right click and select 'Save image as...' instead"),action:[r.a.createElement(Q.a,{key:"close",color:"secondary",size:"small",onClick:this.handleSnackbarClose},"CLOSE")]}))}}]),t}(n.Component),ce.contextType=W,ie=ue,oe=Object(be.a)(ie.prototype,"error",[xe.v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=ie))||le,ht=a(132),gt=a.n(ht),ft=a(231),pt=a.n(ft),bt=a(230),Et=a.n(bt),xt=a(233),vt=a.n(xt),yt=a(232),jt=a.n(yt),Ct=a(229),wt={marginLeft:8},Ot=Object(Ee.a)((rt=nt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleMultilineToggle=function(e){var t=e.target;a.context.builder.toggleMultiline(t.checked)},a.handleDictumChange=function(e){var t=e.target;a.context.builder.changeDictum(t.value)},a.handleAuthorToggle=function(e){var t=e.target;a.context.builder.changeAuthor(t.checked?"\u9c81\u8fc5":"")},a.handleAuthorChange=function(e){var t=e.target;a.context.builder.changeAuthor(t.value)},a.handleColorChange=function(e){var t=e.hex;a.context.builder.changeTextColor(t)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.context.builder,t=e.dictum,a=e.author,n=e.authorVisible,l=e.multiline,i=e.textColor,o=e.drawDictum,c=e.reset;return r.a.createElement(Ie.a,null,r.a.createElement(Ae.a,{title:"\u5185\u5bb9\u7f16\u8f91"}),r.a.createElement(Fe.a,null,r.a.createElement(Ne.a,{label:"\u6587\u5b57\u5185\u5bb9",multiline:l,value:t,placeholder:"\u8bf7\u8f93\u5165\u6587\u5b57\u5185\u5bb9",helperText:l?"\u56de\u8f66\u8fdb\u5165\u4e0b\u4e00\u884c":"\u4f7f\u7528\u53f3\u4fa7\u5f00\u5173\u5207\u6362\u591a\u884c\u6a21\u5f0f",fullWidth:!0,margin:"normal",onChange:this.handleDictumChange,InputProps:{endAdornment:r.a.createElement(Je.a,{position:"end"},r.a.createElement(gt.a,{checked:l,onChange:this.handleMultilineToggle}))}})),r.a.createElement(De.a,null,r.a.createElement(Q.a,{color:"default",variant:"contained",onClick:o},"RANDOM",r.a.createElement(Et.a,{style:wt}))),r.a.createElement(Fe.a,null,r.a.createElement(q.a,{component:"p",color:"textSecondary",gutterBottom:!0},"\u8bbe\u7f6e\u6587\u5b57\u989c\u8272"),r.a.createElement(Ct.TwitterPicker,{triangle:"hide",width:"280px",color:i,colors:["#000","#f3f3f3","#f44336","#9c27b0","#673ab7","#3f51b5","#03a9f4","#009688","#ffc107","#cddc39"],onChangeComplete:this.handleColorChange})),r.a.createElement(Fe.a,null,r.a.createElement(pt.a,{control:r.a.createElement(gt.a,{color:"primary",checked:n,onChange:this.handleAuthorToggle}),label:"\u663e\u793a\u51fa\u5904"}),r.a.createElement(jt.a,{in:n},r.a.createElement(Ne.a,{label:"\u51fa\u5904",value:a,placeholder:"\u8bf7\u8f93\u5165\u51fa\u5904",fullWidth:!0,margin:"normal",onChange:this.handleAuthorChange}))),r.a.createElement(De.a,null,r.a.createElement(Q.a,{color:"secondary",variant:"contained",onClick:c},"RESET",r.a.createElement(vt.a,{style:wt}))))}}]),t}(n.Component),nt.contextType=W,at=rt))||at;function kt(){var e=Object(H.a)(["\n  grid-column: 1 / span 2;\n  width: 100%;\n  max-width: 100%;\n  background-color: ",";\n\n  @supports (display: grid) {\n    display: none;\n  }\n"]);return kt=function(){return e},e}function St(){var e=Object(H.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, minmax(300px, 1fr));\n  grid-gap: 24px;\n  align-items: start;\n  max-width: 1200px;\n  min-width: 300px;\n  margin: auto;\n  padding-top: 24px;\n\n  @media (max-width: 800px) {\n    grid-template-columns: none;\n  }\n"]);return St=function(){return e},e}var It=S.section(St()),Tt=S(ye.a)(kt(),function(e){return e.theme.palette.error.light}),At=Object(Ee.a)((ut=ct=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r))),Object(fe.a)(a,"isAlertVisible",ot,Object(pe.a)(Object(pe.a)(a))),a.handleAlertClose=function(){a.isAlertVisible=!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(It,null,this.isAlertVisible&&r.a.createElement(Tt,{message:"Your browser seems to be out of date so that it lacks support of CSS Grid Layout.",theme:this.context,action:[r.a.createElement(Ce.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleAlertClose},r.a.createElement(Oe.a,null))]}),r.a.createElement(dt,null),r.a.createElement(Ot,null))}}]),t}(n.Component),ct.contextType=k,it=ut,ot=Object(be.a)(it.prototype,"isAlertVisible",[xe.v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lt=it))||lt,Rt=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(_.a,{basename:"/meme-gen"},r.a.createElement(U.a,null,r.a.createElement(ge,null,r.a.createElement(U.a,null,r.a.createElement(B.a,{exact:!0,component:At,path:"/"})))))}}]),t}(n.Component),Ft=Object(b.createGenerateClassName)(),Lt=Object(f.create)(Object(d.a)({},Object(b.jssPreset)(),{insertionPoint:document.getElementById("jss-insertion-point")})),Dt=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(W.Provider,{value:z},r.a.createElement(k.Provider,{value:O},r.a.createElement(b.MuiThemeProvider,{theme:O},r.a.createElement(p.JssProvider,{jss:Lt,generateClassName:Ft},r.a.createElement(n.Fragment,null,r.a.createElement(Rt,null),r.a.createElement(g.a,null))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[240,3,2]]]);
//# sourceMappingURL=main.2d991913.chunk.js.map