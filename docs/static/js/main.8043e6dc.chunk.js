(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(e,t,n){e.exports=n.p+"static/media/luxun_1.77bdf646.jpg"},239:function(e,t,n){e.exports=n(585)},585:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(18),o=n.n(l),i=n(26),c=n(27),u=n(29),m=n(28),s=n(30),d=n(236),h=n(235),g=n.n(h),f=n(64),p=n(214),b=n(40),E=n(87),x=n(218),v=n.n(x),y=n(219),j=n.n(y),C=E,w=C.default,O=(C.css,C.createGlobalStyle,C.keyframes,C.ThemeProvider,Object(b.createMuiTheme)({palette:{primary:v.a,secondary:j.a},typography:{useNextVariants:!0,fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}})),k=a.createContext(O),S=w,I=n(6),T=n(220),A=n(52),F=n.n(A),R=n(130),L=n.n(R),D=["\u665a\u7761\u7684\u4eba\uff0c\u6ca1\u6709\u5bf9\u8c61","\u8868\u60c5\u5305\u591a\u7684\u4eba\uff0c\u6ca1\u6709\u5bf9\u8c61","\u6211\u6ca1\u8bf4\u8fc7\u8fd9\u4e9b\u8bdd","no zuo no die","\u6211\u5c31\u9759\u9759\u5730\u770b\u7740\u4f60\u4eec\u88c5\u903c"],P=function(){return D[Math.floor(Math.random()*D.length)]},M=I.s.model({dictum:P(),author:"\u9c81\u8fc5",imageSrc:L.a,imageLoading:!1,externalImageSrc:"",externalImageFetching:!1,multiline:!1,textColor:"#FFF"}).views(function(e){return{get authorVisible(){return!!e.author}}}).actions(function(e){var t=new window.AbortController,n=t.signal;return{changeDictum:function(t){e.dictum=t},drawDictum:function(){e.dictum=P()},changeAuthor:function(t){e.author=t},changeImage:function(t){e.imageSrc=t},changeExternalImage:function(t){e.externalImageSrc=t},changeTextColor:function(t){e.textColor=t},toggleLoading:function(t){e.imageLoading=t},toggleMultiline:function(t){e.multiline=t},reset:function(){e.imageSrc=L.a,e.dictum=P(),e.author="\u9c81\u8fc5",e.textColor="#FFF"},pickExternalImage:Object(I.f)(F.a.mark(function a(){var r,l,o;return F.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.externalImageFetching?(t.abort(),t=new window.AbortController,n=t.signal):e.externalImageFetching=!0,a.prev=1,a.next=4,fetch("https://api.unsplash.com/photos/random/?client_id=".concat("556115dbc94565196eeec1ba84158924b3c6d4d54918fb1f5cb736c56d3d6982"),{signal:n});case 4:return r=a.sent,a.next=7,r.json();case 7:l=a.sent,o=l.urls.regular,e.externalImageSrc=o,e.imageSrc=o,a.next=16;break;case 13:a.prev=13,a.t0=a.catch(1),console.error(a.t0);case 16:return a.prev=16,e.externalImageFetching=!1,a.finish(16);case 19:case"end":return a.stop()}},a,this,[[1,13,16,19]])}))}}),z=I.s.model({builder:I.s.optional(M,{})}).create(),_=a.createContext(z);Object(I.a)(z,T.a);var U=n(588),B=n(589),H=n(590),V=n(33),W=n(586),N=n(221),G=n.n(N),J=n(222),Y=n.n(J),$=n(22),q=n.n($),K=n(21),Q=n.n(K);function X(){var e=Object(V.a)(["\n  flex-grow: 1;\n  padding: 24px;\n"]);return X=function(){return e},e}function Z(){var e=Object(V.a)(["\n  flex-grow: 1;\n  padding-left: 24px;\n"]);return Z=function(){return e},e}function ee(){var e=Object(V.a)(["\n  text-decoration: none;\n  color: inherit;\n"]);return ee=function(){return e},e}function te(){var e=Object(V.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n"]);return te=function(){return e},e}var ne,ae,re,le,oe,ie,ce,ue,me=S.div(te()),se=S(W.a)(ee()),de=S(q.a)(Z()),he=S.section(X()),ge=function(e){var t=e.children;return r.a.createElement(me,null,r.a.createElement(G.a,{position:"sticky"},r.a.createElement(Y.a,null,r.a.createElement(q.a,{variant:"h6",color:"inherit"},r.a.createElement(se,{to:"/"},"MEME")),r.a.createElement(de,{color:"inherit"},"For modern browsers only"),r.a.createElement(Q.a,{color:"inherit"},"Gallery"))),r.a.createElement(he,null,t))},fe=n(88),pe=n(42),be=n(89),Ee=(n(158),n(41)),xe=n(3),ve=n(127),ye=n.n(ve),je=n(65),Ce=n.n(je),we=n(233),Oe=n.n(we),ke=n(223),Se=n(91),Ie=n.n(Se),Te=n(92),Ae=n.n(Te),Fe=n(43),Re=n.n(Fe),Le=n(53),De=n.n(Le),Pe=n(224),Me=n.n(Pe),ze=n(225),_e=n.n(ze),Ue=n(226),Be=n.n(Ue),He=n(131),Ve=n.n(He),We=n(67),Ne=n.n(We),Ge=n(93),Je=n.n(Ge),Ye=n(227),$e=n.n(Ye),qe=n(90),Ke=n.n(qe),Qe=n(54),Xe=Object(Ee.a)((re=ae=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).authorTextRef=r.a.createRef(),n.dictumTextRef=r.a.createRef(),n.stageRef=null,n.setStageRef=function(e){n.stageRef=e,n.props.innerRef(e)},n.shouldAdjustText=!1,n.state={image:null,error:null},n.componentDidMount=function(){Object(xe.i)(function(){n._createImage(n.context.builder.imageSrc)}),Object(xe.x)(function(){return{dictum:n.context.builder.dictum,author:n.context.builder.author,textColor:n.context.builder.textColor}},function(){n.shouldAdjustText=!0})},n.componentDidUpdate=function(e,t){(t.image!==n.state.image||n.shouldAdjustText)&&(n._adjustText(),n.shouldAdjustText=!1)},n.handleImageReload=function(){n._createImage(n.context.builder.imageSrc)},n.handleSnackbarClose=function(){n.setState({error:null})},n._computeScale=function(e,t,n){if(!n)return 1;var a=Math.min(e,n.width)/n.width,r=Math.min(t,n.height)/n.height;return Math.min(a,r,1)},n._computeSize=function(e,t,n,a){return e?{width:e.width*t,height:e.height*t}:{width:n,height:a}},n}return Object(s.a)(t,e),Object(c.a)(t,[{key:"_createImage",value:function(e){var t=this;if(e){var n=this.context.builder;n.toggleLoading(!0);var a=new window.Image;a.src=e,a.onload=function(){n.toggleLoading(!1),t.setState({image:a})},a.onerror=function(e){n.toggleLoading(!1),n.changeImage(""),t.setState({error:e})}}}},{key:"_adjustText",value:function(){var e=this.stageRef,t=this.authorTextRef.current,n=this.dictumTextRef.current;if(e&&t&&n){var a=e.getStage().getHeight()-t.getHeight();t.y(a),n.y(a-n.getHeight())}}},{key:"render",value:function(){var e=this.context.builder,t=e.dictum,n=e.author,l=e.textColor,o=this.props,i=(o.innerRef,o.containerWidth),c=o.containerHeight,u=this.state,m=u.image,s=u.error,d=this._computeScale(i,c,m),h=this._computeSize(m,d,i,i),g=h.width,f=h.height;return r.a.createElement(a.Fragment,null,r.a.createElement(Qe.Stage,{ref:this.setStageRef,width:g,height:f},r.a.createElement(Qe.Layer,null,m&&r.a.createElement(a.Fragment,null,r.a.createElement(Qe.Image,{image:m,preventDefault:!1,scale:{x:d,y:d}}),r.a.createElement(Qe.Text,{ref:this.dictumTextRef,width:g,x:0,y:f,fill:l,text:t,fontSize:36,align:"center",verticalAlign:"bottom",preventDefault:!1,draggable:!0}),r.a.createElement(Qe.Text,{ref:this.authorTextRef,width:g,x:0,y:f,fill:l,text:n&&"\u2014\u2014".concat(n),padding:16,fontSize:30,align:"right",verticalAlign:"bottom",preventDefault:!1,draggable:!0})))),r.a.createElement(Ke.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!!s,autoHideDuration:3e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Failed to loading image, please check the URL"),action:[r.a.createElement(Q.a,{key:"reload",color:"secondary",size:"small",onClick:this.handleImageReload},"RETRY")]}))}}]),t}(a.Component),ae.contextType=_,ae.defaultProps={containerWidth:600,containerHeight:600},ne=re))||ne;function Ze(){var e=Object(V.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Ze=function(){return e},e}var et,tt,nt,at,rt,lt,ot,it,ct=Object(E.default)(Re.a)(Ze()),ut={marginLeft:8},mt=Object(Ee.a)((ue=ce=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l))),Object(fe.a)(a,"error",ie,Object(pe.a)(Object(pe.a)(a))),a.canvasRef=null,a.handleFileUpload=function(e){var t=e.target,n=t.files&&t.files[0];if(n){var r=new FileReader;r.addEventListener("load",function(){a.context.builder.changeImage(r.result)}),r.readAsDataURL(n)}},a.handleFileDownload=Object(ke.a)(F.a.mark(function e(){var t,r,l,o;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(1).then(n.t.bind(null,587,7));case 2:if(t=e.sent,r=t.saveAs,l=a.canvasRef){o=l.getStage().toCanvas({});try{o.toBlob(function(e){e&&r(e,"pretty image.png")})}catch(i){a.error=i}}case 6:case"end":return e.stop()}},e,this)})),a.handleFileCopy=function(){},a.handleExternalImageSrcChange=function(e){var t=e.target;a.context.builder.changeExternalImage(t.value)},a.handleExternalImageLoad=function(){var e=a.context.builder;e.changeImage(e.externalImageSrc)},a.handleSnackbarClose=function(){a.error=null},a.handleExternalImagePick=function(){a.context.builder.pickExternalImage()},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.context.builder,n=t.externalImageSrc,l=t.externalImageFetching;return r.a.createElement(a.Fragment,null,r.a.createElement(Ie.a,null,r.a.createElement(Ae.a,{title:"\u56fe\u7247\u9884\u89c8"}),r.a.createElement(ct,null,r.a.createElement(Xe,{innerRef:function(t){return e.canvasRef=t}})),r.a.createElement(De.a,null,r.a.createElement("input",{onChange:this.handleFileUpload,accept:"image/*",style:{display:"none"},id:"upload-image",type:"file"}),r.a.createElement("label",{htmlFor:"upload-image"},r.a.createElement(Q.a,{component:"span",color:"primary"},"Upload",r.a.createElement(Me.a,{style:ut}))),r.a.createElement(Q.a,{color:"secondary",onClick:this.handleFileDownload},"Save",r.a.createElement(_e.a,{style:ut})),r.a.createElement(a.Fragment,null,r.a.createElement(Ve.a,{disableTouchListener:!0,title:"Not supported yet!"},r.a.createElement(Q.a,{color:"default",onClick:this.handleFileCopy},"Copy",r.a.createElement(Be.a,{style:ut}))))),r.a.createElement(Re.a,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(q.a,{color:"textSecondary",gutterBottom:!0},"Text supports drag & drop")),r.a.createElement("li",null,r.a.createElement(q.a,{color:"textSecondary",gutterBottom:!0},"Image might overflow with insufficient space, click Save button to preview whole")),r.a.createElement("li",null,r.a.createElement(q.a,{color:"textSecondary"},"Failed to find a clipboard api to programmatically copy canvas/image, right click and select 'Copy image' works though")))),r.a.createElement(Re.a,null,r.a.createElement(Ne.a,{label:"External source",value:n,placeholder:"Use external image source",helperText:"Enter an valid image source and click 'APPLY'",fullWidth:!0,disabled:l,margin:"normal",onChange:this.handleExternalImageSrcChange,InputProps:{endAdornment:r.a.createElement(Je.a,{position:"end"},r.a.createElement(Ve.a,{disableTouchListener:!0,title:"Apply"},r.a.createElement("div",null,r.a.createElement(Ce.a,{disabled:!n,onClick:this.handleExternalImageLoad},r.a.createElement($e.a,null)))))}})),r.a.createElement(De.a,null,r.a.createElement(Q.a,{onClick:this.handleExternalImagePick},"I'm Feeling Lucky"))),r.a.createElement(Ke.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!!this.error,autoHideDuration:3e3,onClose:this.handleSnackbarClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"External image may not be downloaded this way. Right click and select 'Save image as...' instead"),action:[r.a.createElement(Q.a,{key:"close",color:"secondary",size:"small",onClick:this.handleSnackbarClose},"CLOSE")]}))}}]),t}(a.Component),ce.contextType=_,oe=ue,ie=Object(be.a)(oe.prototype,"error",[xe.v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=oe))||le,st=n(132),dt=n.n(st),ht=n(230),gt=n.n(ht),ft=n(229),pt=n.n(ft),bt=n(232),Et=n.n(bt),xt=n(231),vt=n.n(xt),yt=n(228),jt={marginLeft:8},Ct=Object(Ee.a)((nt=tt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleMultilineToggle=function(e){var t=e.target;n.context.builder.toggleMultiline(t.checked)},n.handleDictumChange=function(e){var t=e.target;n.context.builder.changeDictum(t.value)},n.handleAuthorToggle=function(e){var t=e.target;n.context.builder.changeAuthor(t.checked?"\u9c81\u8fc5":"")},n.handleAuthorChange=function(e){var t=e.target;n.context.builder.changeAuthor(t.value)},n.handleColorChange=function(e){var t=e.hex;n.context.builder.changeTextColor(t)},n}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.context.builder,t=e.dictum,n=e.author,a=e.authorVisible,l=e.multiline,o=e.textColor,i=e.drawDictum,c=e.reset;return r.a.createElement(Ie.a,null,r.a.createElement(Ae.a,{title:"\u5185\u5bb9\u7f16\u8f91"}),r.a.createElement(Re.a,null,r.a.createElement(Ne.a,{label:"\u6587\u5b57\u5185\u5bb9",multiline:l,value:t,placeholder:"\u8bf7\u8f93\u5165\u6587\u5b57\u5185\u5bb9",helperText:l?"\u56de\u8f66\u8fdb\u5165\u4e0b\u4e00\u884c":"\u4f7f\u7528\u53f3\u4fa7\u5f00\u5173\u5207\u6362\u591a\u884c\u6a21\u5f0f",fullWidth:!0,margin:"normal",onChange:this.handleDictumChange,InputProps:{endAdornment:r.a.createElement(Je.a,{position:"end"},r.a.createElement(dt.a,{checked:l,onChange:this.handleMultilineToggle}))}})),r.a.createElement(De.a,null,r.a.createElement(Q.a,{color:"default",variant:"contained",onClick:i},"RANDOM",r.a.createElement(pt.a,{style:jt}))),r.a.createElement(Re.a,null,r.a.createElement(q.a,{component:"p",color:"textSecondary",gutterBottom:!0},"\u8bbe\u7f6e\u6587\u5b57\u989c\u8272"),r.a.createElement(yt.TwitterPicker,{triangle:"hide",width:"280px",color:o,colors:["#000","#f3f3f3","#f44336","#9c27b0","#673ab7","#3f51b5","#03a9f4","#009688","#ffc107","#cddc39"],onChangeComplete:this.handleColorChange})),r.a.createElement(Re.a,null,r.a.createElement(gt.a,{control:r.a.createElement(dt.a,{color:"primary",checked:a,onChange:this.handleAuthorToggle}),label:"\u663e\u793a\u51fa\u5904"}),r.a.createElement(vt.a,{in:a},r.a.createElement(Ne.a,{label:"\u51fa\u5904",value:n,placeholder:"\u8bf7\u8f93\u5165\u51fa\u5904",fullWidth:!0,margin:"normal",onChange:this.handleAuthorChange}))),r.a.createElement(De.a,null,r.a.createElement(Q.a,{color:"secondary",variant:"contained",onClick:c},"RESET",r.a.createElement(Et.a,{style:jt}))))}}]),t}(a.Component),tt.contextType=_,et=nt))||et;function wt(){var e=Object(V.a)(["\n  grid-column: 1 / span 2;\n  width: 100%;\n  max-width: 100%;\n  background-color: ",";\n\n  @supports (display: grid) {\n    display: none;\n  }\n"]);return wt=function(){return e},e}function Ot(){var e=Object(V.a)(["\n  display: grid;\n  grid-template-columns: repeat(2, minmax(300px, 1fr));\n  grid-gap: 24px;\n  align-items: start;\n  max-width: 1200px;\n  min-width: 300px;\n  margin: auto;\n  padding-top: 24px;\n\n  @media (max-width: 800px) {\n    grid-template-columns: none;\n  }\n"]);return Ot=function(){return e},e}var kt=S.section(Ot()),St=S(ye.a)(wt(),function(e){return e.theme.palette.error.light}),It=Object(Ee.a)((it=ot=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r))),Object(fe.a)(n,"isAlertVisible",lt,Object(pe.a)(Object(pe.a)(n))),n.handleAlertClose=function(){n.isAlertVisible=!1},n}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(kt,null,this.isAlertVisible&&r.a.createElement(St,{message:"Your browser seems to be out of date so that it lacks support of CSS Grid Layout.",theme:this.context,action:[r.a.createElement(Ce.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.handleAlertClose},r.a.createElement(Oe.a,null))]}),r.a.createElement(mt,null),r.a.createElement(Ct,null))}}]),t}(a.Component),ot.contextType=k,rt=it,lt=Object(be.a)(rt.prototype,"isAlertVisible",[xe.v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),at=rt))||at,Tt=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(U.a,{basename:"/meme-gen"},r.a.createElement(B.a,null,r.a.createElement(ge,null,r.a.createElement(B.a,null,r.a.createElement(H.a,{exact:!0,component:It,path:"/"})))))}}]),t}(a.Component),At=Object(b.createGenerateClassName)(),Ft=Object(f.create)(Object(d.a)({},Object(b.jssPreset)(),{insertionPoint:document.getElementById("jss-insertion-point")})),Rt=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(_.Provider,{value:z},r.a.createElement(k.Provider,{value:O},r.a.createElement(b.MuiThemeProvider,{theme:O},r.a.createElement(p.JssProvider,{jss:Ft,generateClassName:At},r.a.createElement(a.Fragment,null,r.a.createElement(Tt,null),r.a.createElement(g.a,null))))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Rt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[239,3,2]]]);
//# sourceMappingURL=main.8043e6dc.chunk.js.map